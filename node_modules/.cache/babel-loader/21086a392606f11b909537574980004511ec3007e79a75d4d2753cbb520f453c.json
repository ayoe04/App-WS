{"ast":null,"code":"var _jsxFileName = \"/home/ayu/Documents/project-ayu/app-wrap-station/src/dashboard.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\nimport { getAuth, signInAnonymously, signInWithCustomToken } from 'firebase/auth';\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, doc, setDoc, query, onSnapshot, orderBy, where, addDoc } from 'firebase/firestore';\nimport { X, CheckCircle, Car, DollarSign, ListChecks, FileText, User } from 'lucide-react'; // Menggunakan lucide-react untuk ikon\n\n// --- KONFIGURASI FIREBASE ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\n\n// Perbaikan: Amankan proses JSON.parse dengan pengecekan tambahan\nlet firebaseConfig = {};\ntry {\n  // Hanya parse jika variabel didefinisikan dan bukan string kosong\n  if (typeof __firebase_config !== 'undefined' && __firebase_config) {\n    firebaseConfig = JSON.parse(__firebase_config);\n  }\n} catch (e) {\n  console.error(\"Gagal mem-parsing Firebase config:\", e);\n}\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\nlet app;\nlet db;\nlet auth;\ntry {\n  if (Object.keys(firebaseConfig).length > 0) {\n    app = initializeApp(firebaseConfig);\n    db = getFirestore(app);\n    auth = getAuth(app);\n  } else {\n    console.error(\"Firebase config is missing or invalid.\");\n  }\n} catch (error) {\n  console.error(\"Failed to initialize Firebase:\", error);\n}\n\n// Fungsi untuk mendapatkan path koleksi Firestore\nconst getCollectionPath = (userId, collectionName) => {\n  // Kita simpan data inspeksi secara private per user\n  return `/artifacts/${appId}/users/${userId}/${collectionName}`;\n};\n\n// --- Komponen Pembantu ---\n\nconst ImageInput = ({\n  inspectionId,\n  file,\n  handleFormChange\n}) => {\n  _s();\n  const fileInputRef = useRef(null);\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        handleFormChange('inspection', inspectionId, {\n          file: {\n            name: file.name,\n            dataUrl: reader.result // Data URL (Base64) untuk dikirim ke backend\n          },\n          // Pastikan status dan notes tidak hilang saat file diunggah\n          status: file && file.status || 'G',\n          notes: file && file.notes || ''\n        });\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const handleRemoveImage = () => {\n    handleFormChange('inspection', inspectionId, {\n      file: null,\n      status: file && file.status || 'G',\n      notes: file && file.notes || ''\n    });\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\"; // Reset input file\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-start space-y-2 mt-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: handleFileChange,\n      ref: fileInputRef,\n      className: \"text-sm text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), file && file.dataUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-xs font-medium text-gray-600 truncate max-w-xs\",\n        children: file.name || 'Image Uploaded'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleRemoveImage,\n        className: \"text-red-500 hover:text-red-700 transition duration-150\",\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n\n// KOMPONEN INI YANG DIPERBAIKI\n_s(ImageInput, \"YQqvMxdmg33cmOXmQcOjJm+FLVI=\");\n_c = ImageInput;\nconst RatingInput = ({\n  inspectionId,\n  details,\n  handleFormChange\n}) => {\n  _s2();\n  const [showNote, setShowNote] = useState(false);\n\n  // Perbaikan: Pastikan inspectionId digunakan untuk mengubah state\n  const setRating = rating => {\n    handleFormChange('inspection', inspectionId, {\n      ...details,\n      status: rating\n    });\n  };\n\n  // Perbaikan: Pastikan inspectionId digunakan untuk mengubah state\n  const setNote = e => {\n    handleFormChange('inspection', inspectionId, {\n      ...details,\n      notes: e.target.value\n    });\n  };\n  const toggleNote = () => {\n    setShowNote(!showNote);\n  };\n  const statusColors = {\n    G: 'bg-green-500 hover:bg-green-600',\n    F: 'bg-yellow-500 hover:bg-yellow-600',\n    P: 'bg-red-500 hover:bg-red-600'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 border border-gray-200 rounded-xl mb-4 bg-white shadow-sm\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [['G', 'F', 'P'].map(rating => /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setRating(rating),\n          className: `w-10 h-10 rounded-full font-bold text-white transition duration-200 ${details.status === rating ? statusColors[rating] : 'bg-gray-300 hover:bg-gray-400'}`,\n          children: rating\n        }, rating, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg font-semibold text-gray-700\",\n          children: inspectionId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: toggleNote,\n        className: \"px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-full hover:bg-indigo-600 transition duration-150 shadow-md\",\n        children: showNote ? 'Sembunyikan Catatan' : 'Catatan'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), showNote && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 p-3 bg-indigo-50 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: details.notes,\n        onChange: setNote,\n        placeholder: `Tambahkan catatan untuk ${inspectionId}...`,\n        rows: \"3\",\n        className: \"w-full p-2 border border-indigo-200 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-gray-700\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ImageInput, {\n        inspectionId: inspectionId,\n        file: details.file,\n        handleFormChange: handleFormChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n};\n\n// Komponen untuk Tanda Tangan\n_s2(RatingInput, \"SMLWg0zgXYqREDVWvVMuUf6B2K0=\");\n_c2 = RatingInput;\nconst SignatureForm = ({\n  formData,\n  handleFormChange,\n  onSubmit,\n  isLoading\n}) => {\n  _s3();\n  const canvasRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [hasDrawn, setHasDrawn] = useState(!!formData.signature); // State untuk melacak apakah sudah ada gambar di canvas\n\n  // Fungsi untuk membersihkan canvas dan mengisi dengan warna putih\n  const clearCanvas = (ctx, canvas) => {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.fillStyle = '#ffffff';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n  };\n\n  // Fungsi yang memuat gambar tanda tangan dari state ke canvas\n  const redrawSignatureFromState = useCallback(signatureDataUrl => {\n    const canvas = canvasRef.current;\n    if (!canvas || !signatureDataUrl) return;\n    const ctx = canvas.getContext('2d');\n\n    // 1. Bersihkan canvas\n    clearCanvas(ctx, canvas);\n\n    // 2. Gambar ulang tanda tangan\n    const img = new Image();\n    img.onload = () => {\n      // Pastikan gambar digambar pada ukuran canvas saat ini\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n    };\n    img.src = signatureDataUrl;\n    setHasDrawn(true);\n  }, []);\n\n  // Efek untuk Inisialisasi Canvas dan Redraw\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    // Set canvas resolution based on display size for clear rendering\n    const rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width;\n    canvas.height = rect.height;\n    const ctx = canvas.getContext('2d');\n\n    // Inisialisasi dengan latar belakang putih\n    clearCanvas(ctx, canvas);\n\n    // Redraw tanda tangan dari state jika ada\n    if (formData.signature && !isDrawing) {\n      redrawSignatureFromState(formData.signature);\n    }\n  }, [formData.signature, redrawSignatureFromState, isDrawing]);\n\n  // Menggambar saat mouse/sentuhan bergerak\n  const drawSignature = useCallback((e, isTouch = false) => {\n    if (!isDrawing) return;\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n    const x = isTouch ? e.touches[0].clientX - rect.left : e.clientX - rect.left;\n    const y = isTouch ? e.touches[0].clientY - rect.top : e.clientY - rect.top;\n    ctx.lineWidth = 2;\n    ctx.lineCap = 'round';\n    ctx.strokeStyle = '#000000';\n    ctx.lineTo(x, y);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n\n    // Perbarui hasDrawn setelah menggambar\n    setHasDrawn(true);\n  }, [isDrawing]);\n\n  // Memulai menggambar\n  const handleStart = useCallback((e, isTouch) => {\n    if (isTouch) e.preventDefault();\n    setIsDrawing(true);\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n    const x = isTouch ? e.touches[0].clientX - rect.left : e.clientX - rect.left;\n    const y = isTouch ? e.touches[0].clientY - rect.top : e.clientY - rect.top;\n\n    // Mulai path baru\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n  }, []);\n\n  // Mengakhiri menggambar dan menyimpan ke state\n  const handleEnd = useCallback(() => {\n    if (isDrawing) {\n      setIsDrawing(false);\n      const canvas = canvasRef.current;\n      if (canvas) {\n        // Simpan tanda tangan yang baru digambar sebagai Data URL\n        const dataUrl = canvas.toDataURL('image/png');\n        handleFormChange('root', 'signature', dataUrl);\n      }\n    }\n  }, [isDrawing, handleFormChange]);\n  const clearSignature = () => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      const ctx = canvas.getContext('2d');\n      clearCanvas(ctx, canvas); // Bersihkan tampilan canvas\n      handleFormChange('root', 'signature', ''); // Kosongkan state\n      setHasDrawn(false);\n    }\n  };\n\n  // Efek untuk mengatur Event Listeners (hanya sekali saat mount)\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const mouseMoveHandler = e => drawSignature(e, false);\n    const touchMoveHandler = e => drawSignature(e, true);\n    const mouseDownHandler = e => handleStart(e, false);\n    const touchStartHandler = e => handleStart(e, true);\n    const mouseUpHandler = () => handleEnd();\n    const touchEndHandler = () => handleEnd();\n\n    // Pasang Event Listeners\n    canvas.addEventListener('mousedown', mouseDownHandler);\n    canvas.addEventListener('mousemove', mouseMoveHandler);\n    // document untuk menangkap mouseup di luar canvas\n    document.addEventListener('mouseup', mouseUpHandler);\n    canvas.addEventListener('touchstart', touchStartHandler);\n    canvas.addEventListener('touchmove', touchMoveHandler);\n    // document untuk menangkap touchend di luar canvas\n    document.addEventListener('touchend', touchEndHandler);\n\n    // Cleanup event listeners\n    return () => {\n      canvas.removeEventListener('mousedown', mouseDownHandler);\n      canvas.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler);\n      canvas.removeEventListener('touchstart', touchStartHandler);\n      canvas.removeEventListener('touchmove', touchMoveHandler);\n      document.removeEventListener('touchend', touchEndHandler);\n    };\n  }, [drawSignature, handleStart, handleEnd]); // dependencies ini harus tetap ada\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white rounded-xl shadow-lg mt-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-xl font-bold text-gray-800 mb-4\",\n      children: \"Tanda Tangan Pelanggan\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative border border-gray-300 rounded-lg overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"w-full h-48 bg-white cursor-crosshair\",\n        style: {\n          touchAction: 'none'\n        } // Mencegah scrolling browser saat menggambar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: clearSignature\n        // Tampilkan tombol Clear hanya jika sudah ada tanda tangan (berdasarkan state)\n        ,\n        className: `absolute top-2 right-2 p-2 rounded-full transition duration-150 ${formData.signature || hasDrawn ? 'bg-red-100 text-red-600 hover:bg-red-200 opacity-100' : 'opacity-0 pointer-events-none'}`,\n        title: \"Hapus Tanda Tangan\",\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        id: \"agreeTerms\",\n        checked: formData.agreed,\n        onChange: e => handleFormChange('root', 'agreed', e.target.checked),\n        className: \"h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"agreeTerms\",\n        className: \"ml-3 text-base text-gray-700 font-medium\",\n        children: \"Saya telah membaca dan menyetujui Syarat & Ketentuan.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 5\n  }, this);\n};\n\n// Komponen Utama: Form Inspeksi\n_s3(SignatureForm, \"+Aukr8ffqrItvOfLgqzaYNSmX6I=\");\n_c3 = SignatureForm;\nconst InspectionForm = ({\n  formData,\n  handleFormChange,\n  goToNext,\n  goToPrev\n}) => {\n  // Hanya mendefinisikan item-item inspeksi\n  const inspectionItems = ['Cat Mobil', 'Panel Bodi', 'Kaca', 'Ban', 'Pelek'];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-gray-50 rounded-xl shadow-inner min-h-[60vh]\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-extrabold text-indigo-700 mb-6 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(ListChecks, {\n        size: 24,\n        className: \"mr-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), \" 2. Inspeksi Kendaraan\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"font-semibold text-indigo-800\",\n        children: \"Keterangan Status:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-disc list-inside ml-4 text-sm text-indigo-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"G = Good (Baik)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"F = Fair (Cukup)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"P = Poor (Buruk)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: inspectionItems.map(item => /*#__PURE__*/_jsxDEV(RatingInput, {\n        inspectionId: item // Menggunakan inspectionId di sini\n        ,\n        details: formData.inspection[item] || {\n          status: 'G',\n          notes: '',\n          file: null\n        },\n        handleFormChange: handleFormChange\n      }, item, false, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between mt-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goToPrev,\n        type: \"button\",\n        className: \"px-6 py-3 bg-gray-300 text-gray-800 font-bold rounded-xl shadow-md hover:bg-gray-400 transition duration-150\",\n        children: \"\\u2190 Sebelumnya\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goToNext,\n        type: \"button\",\n        className: \"px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-lg hover:bg-indigo-700 transition duration-150\",\n        children: \"Lanjut ke Syarat & Tanda Tangan \\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 385,\n    columnNumber: 5\n  }, this);\n};\n\n// Komponen Utama: Customer dan Vehicle Form\n_c4 = InspectionForm;\nconst CustomerForm = ({\n  formData,\n  handleFormChange,\n  goToNext\n}) => {\n  const handleChange = e => {\n    handleFormChange('customer', e.target.name, e.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white rounded-xl shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-extrabold text-indigo-700 mb-6 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(User, {\n        size: 24,\n        className: \"mr-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 9\n      }, this), \" 1. Detail Pelanggan & Kendaraan\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4 border-r pr-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-gray-800 border-b pb-2\",\n          children: \"Detail Pelanggan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"firstName\",\n          placeholder: \"Nama Depan Pelanggan\",\n          value: formData.customer.firstName,\n          onChange: handleChange,\n          required: true,\n          className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"lastName\",\n          placeholder: \"Nama Belakang Pelanggan\",\n          value: formData.customer.lastName,\n          onChange: handleChange,\n          required: true,\n          className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"phone\",\n          type: \"tel\",\n          placeholder: \"Nomor Telepon\",\n          value: formData.customer.phone,\n          onChange: handleChange,\n          required: true,\n          className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-gray-800 border-b pb-2\",\n          children: \"Detail Kendaraan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"carBrand\",\n          placeholder: \"Merek Mobil (e.g., Toyota)\",\n          value: formData.customer.carBrand,\n          onChange: handleChange,\n          required: true,\n          className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"carModel\",\n          placeholder: \"Model Mobil (e.g., Camry)\",\n          value: formData.customer.carModel,\n          onChange: handleChange,\n          required: true,\n          className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"color\",\n          placeholder: \"Warna Kendaraan\",\n          value: formData.customer.color,\n          onChange: handleChange,\n          required: true,\n          className: \"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end mt-8\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goToNext,\n        type: \"button\",\n        className: \"px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-lg hover:bg-indigo-700 transition duration-150\",\n        children: \"Lanjut ke Inspeksi \\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 438,\n    columnNumber: 5\n  }, this);\n};\n\n// Komponen Modal (Popup)\n_c5 = CustomerForm;\nconst Modal = ({\n  title,\n  message,\n  onClose,\n  isSuccess\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-xl shadow-2xl p-8 max-w-sm w-full text-center transform transition-all duration-300 scale-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `mx-auto mb-4 ${isSuccess ? 'text-green-500' : 'text-red-500'}`,\n      children: isSuccess ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n        size: 48,\n        className: \"mx-auto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 22\n      }, this) : /*#__PURE__*/_jsxDEV(X, {\n        size: 48,\n        className: \"mx-auto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 69\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-2xl font-bold mb-3 text-gray-900\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-6\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClose,\n      className: \"w-full py-3 px-4 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition duration-150 shadow-md\",\n      children: \"OK\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 526,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 520,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 519,\n  columnNumber: 3\n}, this);\n\n// --- Komponen Utama Aplikasi ---\n_c6 = Modal;\nconst App = () => {\n  _s4();\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  const [modal, setModal] = useState({\n    show: false,\n    title: '',\n    message: '',\n    isSuccess: false\n  });\n  const [dbInstance, setDbInstance] = useState(null);\n  const [userId, setUserId] = useState(null);\n\n  // State data form utama\n  const [formData, setFormData] = useState({\n    customer: {\n      firstName: '',\n      lastName: '',\n      phone: '',\n      carBrand: '',\n      carModel: '',\n      color: ''\n    },\n    inspection: {\n      'Cat Mobil': {\n        status: 'G',\n        notes: '',\n        file: null\n      },\n      'Panel Bodi': {\n        status: 'G',\n        notes: '',\n        file: null\n      },\n      'Kaca': {\n        status: 'G',\n        notes: '',\n        file: null\n      },\n      'Ban': {\n        status: 'G',\n        notes: '',\n        file: null\n      },\n      'Pelek': {\n        status: 'G',\n        notes: '',\n        file: null\n      }\n    },\n    signature: '',\n    agreed: false,\n    date: new Date().toISOString()\n  });\n\n  // --- FIREBASE INIT & AUTH ---\n  useEffect(() => {\n    if (auth && db) {\n      const initializeAuth = async () => {\n        try {\n          if (initialAuthToken) {\n            await signInWithCustomToken(auth, initialAuthToken);\n          } else {\n            await signInAnonymously(auth);\n          }\n        } catch (error) {\n          console.error(\"Firebase auth failed:\", error);\n          // Fallback to anonymous sign-in if custom token fails\n          try {\n            await signInAnonymously(auth);\n          } catch (anonError) {\n            console.error(\"Anonymous sign-in failed:\", anonError);\n          }\n        }\n      };\n      initializeAuth();\n\n      // Listener untuk mendapatkan ID pengguna setelah autentikasi\n      const unsubscribe = auth.onAuthStateChanged(user => {\n        if (user) {\n          setUserId(user.uid);\n          setDbInstance(db);\n          console.log(\"Authenticated with UID:\", user.uid);\n        } else {\n          // Hanya set userId jika auth sudah ready dan tidak ada user (anon)\n          setUserId(crypto.randomUUID());\n          setDbInstance(db);\n        }\n      });\n      return () => unsubscribe();\n    }\n  }, []);\n\n  // Handler perubahan form generik\n  const handleFormChange = (section, key, value) => {\n    if (section === 'root') {\n      setFormData(prev => ({\n        ...prev,\n        [key]: value\n      }));\n    } else {\n      // Untuk customer atau inspection\n      setFormData(prev => ({\n        ...prev,\n        [section]: {\n          ...prev[section],\n          [key]: value\n        }\n      }));\n    }\n  };\n  const goToNextPage = () => setCurrentPage(prev => prev + 1);\n  const goToPrevPage = () => setCurrentPage(prev => prev - 1);\n  const closeModal = () => setModal({\n    show: false,\n    title: '',\n    message: '',\n    isSuccess: false\n  });\n\n  // Handler Submit\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!formData.agreed) {\n      setModal({\n        show: true,\n        title: 'Error',\n        message: 'Anda harus menyetujui Syarat & Ketentuan.',\n        isSuccess: false\n      });\n      return;\n    }\n    if (!formData.signature) {\n      setModal({\n        show: true,\n        title: 'Error',\n        message: 'Tanda tangan pelanggan tidak boleh kosong.',\n        isSuccess: false\n      });\n      return;\n    }\n    if (isLoading || !dbInstance || !userId) return;\n    setIsLoading(true);\n    try {\n      // 1. Filter Data URL Gambar yang valid dan hapus input file mentah\n      const dataToSend = JSON.parse(JSON.stringify(formData));\n\n      // Hapus Data URL yang besar jika tidak ada, atau saring hanya yang dibutuhkan\n      Object.keys(dataToSend.inspection).forEach(item => {\n        if (dataToSend.inspection[item].file) {\n          // Pastikan hanya mengirim name dan dataUrl\n          dataToSend.inspection[item].file = {\n            name: dataToSend.inspection[item].file.name,\n            dataUrl: dataToSend.inspection[item].file.dataUrl\n          };\n        }\n      });\n\n      // 2. Simpan ke Firestore\n      const inspectionCollectionRef = collection(dbInstance, getCollectionPath(userId, 'inspections'));\n      await addDoc(inspectionCollectionRef, dataToSend);\n\n      // 3. Panggil backend untuk membuat dan mengunduh PDF\n      // Mengubah fetchPdf agar menggunakan jalur relatif '/api/generate-pdf' \n      // untuk memanfaatkan proxy yang dikonfigurasi di package.json.\n      await fetchPdf(dataToSend);\n      setModal({\n        show: true,\n        title: 'Success',\n        message: 'Inspeksi berhasil ditambahkan dan PDF akan diunduh.',\n        isSuccess: true\n      });\n      // Reset form setelah berhasil\n      setFormData({\n        customer: {\n          firstName: '',\n          lastName: '',\n          phone: '',\n          carBrand: '',\n          carModel: '',\n          color: ''\n        },\n        inspection: {\n          'Cat Mobil': {\n            status: 'G',\n            notes: '',\n            file: null\n          },\n          'Panel Bodi': {\n            status: 'G',\n            notes: '',\n            file: null\n          },\n          'Kaca': {\n            status: 'G',\n            notes: '',\n            file: null\n          },\n          'Ban': {\n            status: 'G',\n            notes: '',\n            file: null\n          },\n          'Pelek': {\n            status: 'G',\n            notes: '',\n            file: null\n          }\n        },\n        signature: '',\n        agreed: false,\n        date: new Date().toISOString()\n      });\n      setCurrentPage(1);\n    } catch (error) {\n      console.error(\"Submission failed:\", error);\n      setModal({\n        show: true,\n        title: 'Error',\n        message: 'Gagal memproses inspeksi. Silakan coba lagi.',\n        isSuccess: false\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const fetchPdf = async data => {\n    // Implementasi logic unduh PDF dari backend\n    console.log(\"Mencoba fetch PDF dari backend...\");\n\n    // PERBAIKAN: Menggunakan path relatif agar proxy di package.json bekerja.\n    const apiUrl = `/api/generate-pdf`;\n    let attempt = 0;\n    const maxRetries = 3;\n    const baseDelay = 1000;\n    while (attempt < maxRetries) {\n      try {\n        const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data)\n        });\n        if (!response.ok) {\n          // Tambahkan logging lebih detail jika server merespons tapi dengan status error\n          const errorText = await response.text();\n          throw new Error(`HTTP error! status: ${response.status}. Details: ${errorText}`);\n        }\n\n        // Ambil nama file dari header Content-Disposition (jika ada)\n        const contentDisposition = response.headers.get('Content-Disposition');\n        let filename = 'inspection_report.pdf';\n        if (contentDisposition) {\n          const match = contentDisposition.match(/filename=\"(.+)\"/);\n          if (match && match[1]) {\n            filename = match[1];\n          }\n        }\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n        a.click();\n        a.remove();\n        window.URL.revokeObjectURL(url);\n        console.log(\"PDF berhasil diunduh.\");\n        return; // Keluar dari loop jika berhasil\n      } catch (error) {\n        console.error(`Attempt ${attempt + 1} failed:`, error);\n        attempt++;\n        if (attempt < maxRetries) {\n          const delay = baseDelay * Math.pow(2, attempt - 1); // Exponential backoff\n          await new Promise(res => setTimeout(res, delay));\n        } else {\n          // Tampilkan pesan error kepada pengguna jika semua retry gagal\n          setModal({\n            show: true,\n            title: 'Error Unduhan',\n            message: 'Gagal mengunduh PDF setelah beberapa kali percobaan. Pastikan server backend berjalan.',\n            isSuccess: false\n          });\n          console.error(\"Gagal mengunduh PDF setelah beberapa kali percobaan. Pastikan backend server Node.js berjalan di http://localhost:4000\");\n          throw new Error(\"PDF download failed after retries.\"); // Lempar error untuk mengakhiri proses\n        }\n      }\n    }\n  };\n\n  // --- Render Halaman ---\n  const renderPage = () => {\n    switch (currentPage) {\n      case 1:\n        return /*#__PURE__*/_jsxDEV(CustomerForm, {\n          formData: formData,\n          handleFormChange: handleFormChange,\n          goToNext: goToNextPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 757,\n          columnNumber: 16\n        }, this);\n      case 2:\n        return /*#__PURE__*/_jsxDEV(InspectionForm, {\n          formData: formData,\n          handleFormChange: handleFormChange,\n          goToNext: goToNextPage,\n          goToPrev: goToPrevPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 16\n        }, this);\n      case 3:\n        return /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"p-6 bg-white rounded-xl shadow-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-extrabold text-indigo-700 mb-6 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              size: 24,\n              className: \"mr-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 764,\n              columnNumber: 15\n            }, this), \" 3. Syarat & Ketentuan\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 763,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-100 p-4 rounded-lg h-64 overflow-y-scroll border border-gray-200 text-sm text-gray-700 space-y-2 mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-bold text-center mb-3\",\n              children: \"SYARAT DAN KETENTUAN - SERAH TERIMA KENDARAAN DI WRAP STATION\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 769,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n              className: \"list-decimal list-inside space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Kondisi kendaraan dapat berubah setelah pembersihan. Tim akan menginformasikan jika ada perubahan.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 771,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Status cat kendaraan (repaint/original) tidak dapat dipastikan, risiko ditanggung pemilik.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 772,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Penambahan jarak tempuh (mileage) bisa terjadi, dan bukan tanggung jawab Wrap Station.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 773,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Kerusakan/malfungsi mesin selama atau setelah pengerjaan bukan tanggung jawab Wrap Station.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 774,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Kerusakan akibat pembongkaran aksesori oleh pemilik selama atau setelah pengerjaan bukan tanggung jawab Wrap Station.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 775,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Kehilangan barang pribadi bukan tanggung jawab Wrap Station.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 776,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Wrap Station berhak melakukan tindakan teknis yang diperlukan tanpa persetujuan lebih lanjut.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 777,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Kondisi/modifikasi khusus yang tidak diinformasikan di awal dapat membatalkan garansi.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 778,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Penurunan baterai EV adalah kondisi alami, bukan tanggung jawab kami.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 779,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Estimasi pengerjaan dapat berubah karena faktor tak terduga.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 780,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 768,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SignatureForm, {\n            formData: formData,\n            handleFormChange: handleFormChange,\n            onSubmit: handleSubmit,\n            isLoading: isLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 784,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between mt-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: goToPrevPage,\n              type: \"button\",\n              className: \"px-6 py-3 bg-gray-300 text-gray-800 font-bold rounded-xl shadow-md hover:bg-gray-400 transition duration-150\",\n              children: \"\\u2190 Sebelumnya\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 792,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: isLoading || !formData.agreed || !formData.signature,\n              className: `px-8 py-3 font-bold rounded-xl shadow-lg transition duration-150 flex items-center justify-center ${isLoading || !formData.agreed || !formData.signature ? 'bg-indigo-300 cursor-not-allowed' : 'bg-indigo-600 text-white hover:bg-indigo-700'}`,\n              children: isLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Car, {\n                  size: 20,\n                  className: \"animate-pulse mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 810,\n                  columnNumber: 21\n                }, this), \" Membuat PDF...\"]\n              }, void 0, true) : 'Submit Inspection & Download PDF'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 799,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 791,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 762,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Halaman Tidak Ditemukan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 820,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 p-8 font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"mb-8 p-4 bg-white rounded-xl shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-extrabold text-indigo-800 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Car, {\n          size: 32,\n          className: \"mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 828,\n          columnNumber: 11\n        }, this), \" Wrap Station - Form Inspeksi Kendaraan\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 827,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 text-sm text-gray-500\",\n        children: [\"User ID: \", userId || 'Authenticating...']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 830,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 826,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-4xl mx-auto\",\n      children: renderPage()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 835,\n      columnNumber: 7\n    }, this), modal.show && /*#__PURE__*/_jsxDEV(Modal, {\n      ...modal,\n      onClose: closeModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 839,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 825,\n    columnNumber: 5\n  }, this);\n};\n_s4(App, \"jEwTJZ0+WChX2+87XLyEFB0q1nY=\");\n_c7 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"ImageInput\");\n$RefreshReg$(_c2, \"RatingInput\");\n$RefreshReg$(_c3, \"SignatureForm\");\n$RefreshReg$(_c4, \"InspectionForm\");\n$RefreshReg$(_c5, \"CustomerForm\");\n$RefreshReg$(_c6, \"Modal\");\n$RefreshReg$(_c7, \"App\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","useRef","getAuth","signInAnonymously","signInWithCustomToken","initializeApp","getFirestore","collection","doc","setDoc","query","onSnapshot","orderBy","where","addDoc","X","CheckCircle","Car","DollarSign","ListChecks","FileText","User","jsxDEV","_jsxDEV","Fragment","_Fragment","appId","__app_id","firebaseConfig","__firebase_config","JSON","parse","e","console","error","initialAuthToken","__initial_auth_token","app","db","auth","Object","keys","length","getCollectionPath","userId","collectionName","ImageInput","inspectionId","file","handleFormChange","_s","fileInputRef","handleFileChange","target","files","reader","FileReader","onloadend","name","dataUrl","result","status","notes","readAsDataURL","handleRemoveImage","current","value","className","children","type","accept","onChange","ref","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","_c","RatingInput","details","_s2","showNote","setShowNote","setRating","rating","setNote","toggleNote","statusColors","G","F","P","map","placeholder","rows","_c2","SignatureForm","formData","onSubmit","isLoading","_s3","canvasRef","isDrawing","setIsDrawing","hasDrawn","setHasDrawn","signature","clearCanvas","ctx","canvas","clearRect","width","height","fillStyle","fillRect","redrawSignatureFromState","signatureDataUrl","getContext","img","Image","onload","drawImage","src","rect","getBoundingClientRect","drawSignature","isTouch","x","touches","clientX","left","y","clientY","top","lineWidth","lineCap","strokeStyle","lineTo","stroke","beginPath","moveTo","handleStart","preventDefault","handleEnd","toDataURL","clearSignature","mouseMoveHandler","touchMoveHandler","mouseDownHandler","touchStartHandler","mouseUpHandler","touchEndHandler","addEventListener","document","removeEventListener","style","touchAction","title","id","checked","agreed","htmlFor","_c3","InspectionForm","goToNext","goToPrev","inspectionItems","item","inspection","_c4","CustomerForm","handleChange","customer","firstName","required","lastName","phone","carBrand","carModel","color","_c5","Modal","message","onClose","isSuccess","_c6","App","_s4","currentPage","setCurrentPage","setIsLoading","modal","setModal","show","dbInstance","setDbInstance","setUserId","setFormData","date","Date","toISOString","initializeAuth","anonError","unsubscribe","onAuthStateChanged","user","uid","log","crypto","randomUUID","section","key","prev","goToNextPage","goToPrevPage","closeModal","handleSubmit","dataToSend","stringify","forEach","inspectionCollectionRef","fetchPdf","data","apiUrl","attempt","maxRetries","baseDelay","response","fetch","method","headers","body","ok","errorText","text","Error","contentDisposition","get","filename","match","blob","url","window","URL","createObjectURL","a","createElement","href","download","appendChild","click","remove","revokeObjectURL","delay","Math","pow","Promise","res","setTimeout","renderPage","disabled","_c7","$RefreshReg$"],"sources":["/home/ayu/Documents/project-ayu/app-wrap-station/src/dashboard.jsx"],"sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport { getAuth, signInAnonymously, signInWithCustomToken } from 'firebase/auth';\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, doc, setDoc, query, onSnapshot, orderBy, where, addDoc } from 'firebase/firestore';\nimport { X, CheckCircle, Car, DollarSign, ListChecks, FileText, User } from 'lucide-react'; // Menggunakan lucide-react untuk ikon\n\n// --- KONFIGURASI FIREBASE ---\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\n\n// Perbaikan: Amankan proses JSON.parse dengan pengecekan tambahan\nlet firebaseConfig = {};\ntry {\n  // Hanya parse jika variabel didefinisikan dan bukan string kosong\n  if (typeof __firebase_config !== 'undefined' && __firebase_config) {\n      firebaseConfig = JSON.parse(__firebase_config);\n  }\n} catch (e) {\n  console.error(\"Gagal mem-parsing Firebase config:\", e);\n}\n\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\n\nlet app;\nlet db;\nlet auth;\n\ntry {\n  if (Object.keys(firebaseConfig).length > 0) {\n    app = initializeApp(firebaseConfig);\n    db = getFirestore(app);\n    auth = getAuth(app);\n  } else {\n    console.error(\"Firebase config is missing or invalid.\");\n  }\n} catch (error) {\n  console.error(\"Failed to initialize Firebase:\", error);\n}\n\n// Fungsi untuk mendapatkan path koleksi Firestore\nconst getCollectionPath = (userId, collectionName) => {\n// Kita simpan data inspeksi secara private per user\nreturn `/artifacts/${appId}/users/${userId}/${collectionName}`;\n};\n\n// --- Komponen Pembantu ---\n\nconst ImageInput = ({ inspectionId, file, handleFormChange }) => {\n  const fileInputRef = useRef(null);\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        handleFormChange('inspection', inspectionId, {\n          file: {\n            name: file.name,\n            dataUrl: reader.result, // Data URL (Base64) untuk dikirim ke backend\n          },\n          // Pastikan status dan notes tidak hilang saat file diunggah\n          status: (file && file.status) || 'G', \n          notes: (file && file.notes) || '', \n        });\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleRemoveImage = () => {\n    handleFormChange('inspection', inspectionId, { file: null, status: (file && file.status) || 'G', notes: (file && file.notes) || '' });\n    if (fileInputRef.current) {\n        fileInputRef.current.value = \"\"; // Reset input file\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-start space-y-2 mt-2\">\n      <input \n        type=\"file\" \n        accept=\"image/*\" \n        onChange={handleFileChange} \n        ref={fileInputRef}\n        className=\"text-sm text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100\"\n      />\n      {file && file.dataUrl && (\n        <div className=\"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg\">\n          <span className=\"text-xs font-medium text-gray-600 truncate max-w-xs\">{file.name || 'Image Uploaded'}</span>\n          <button \n            type=\"button\" \n            onClick={handleRemoveImage} \n            className=\"text-red-500 hover:text-red-700 transition duration-150\"\n          >\n            <X size={16} />\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// KOMPONEN INI YANG DIPERBAIKI\nconst RatingInput = ({ inspectionId, details, handleFormChange }) => {\n  const [showNote, setShowNote] = useState(false);\n\n  // Perbaikan: Pastikan inspectionId digunakan untuk mengubah state\n  const setRating = (rating) => {\n    handleFormChange('inspection', inspectionId, { ...details, status: rating });\n  };\n\n  // Perbaikan: Pastikan inspectionId digunakan untuk mengubah state\n  const setNote = (e) => {\n    handleFormChange('inspection', inspectionId, { ...details, notes: e.target.value });\n  };\n  \n  const toggleNote = () => {\n    setShowNote(!showNote);\n  };\n\n  const statusColors = {\n    G: 'bg-green-500 hover:bg-green-600',\n    F: 'bg-yellow-500 hover:bg-yellow-600',\n    P: 'bg-red-500 hover:bg-red-600',\n  };\n\n  return (\n    <div className=\"p-4 border border-gray-200 rounded-xl mb-4 bg-white shadow-sm\">\n      <div className=\"flex justify-between items-center\">\n        <div className=\"flex items-center space-x-3\">\n          {['G', 'F', 'P'].map((rating) => (\n            <button\n              key={rating}\n              type=\"button\"\n              onClick={() => setRating(rating)}\n              className={`w-10 h-10 rounded-full font-bold text-white transition duration-200 ${\n                details.status === rating ? statusColors[rating] : 'bg-gray-300 hover:bg-gray-400'\n              }`}\n            >\n              {rating}\n            </button>\n          ))}\n          <span className=\"text-lg font-semibold text-gray-700\">{inspectionId}</span> {/* Menggunakan inspectionId di sini */}\n        </div>\n        \n        <button\n          type=\"button\"\n          onClick={toggleNote}\n          className=\"px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-full hover:bg-indigo-600 transition duration-150 shadow-md\"\n        >\n          {showNote ? 'Sembunyikan Catatan' : 'Catatan'}\n        </button>\n      </div>\n\n      {showNote && (\n        <div className=\"mt-4 p-3 bg-indigo-50 rounded-lg\">\n          <textarea\n            value={details.notes}\n            onChange={setNote}\n            placeholder={`Tambahkan catatan untuk ${inspectionId}...`}\n            rows=\"3\"\n            className=\"w-full p-2 border border-indigo-200 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-gray-700\"\n          ></textarea>\n          <ImageInput\n            inspectionId={inspectionId}\n            file={details.file}\n            handleFormChange={handleFormChange}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\n\n// Komponen untuk Tanda Tangan\nconst SignatureForm = ({ formData, handleFormChange, onSubmit, isLoading }) => {\n  const canvasRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false); \n  const [hasDrawn, setHasDrawn] = useState(!!formData.signature); // State untuk melacak apakah sudah ada gambar di canvas\n\n  // Fungsi untuk membersihkan canvas dan mengisi dengan warna putih\n  const clearCanvas = (ctx, canvas) => {\n    ctx.clearRect(0, 0, canvas.width, canvas.height); \n    ctx.fillStyle = '#ffffff'; \n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n  };\n  \n  // Fungsi yang memuat gambar tanda tangan dari state ke canvas\n  const redrawSignatureFromState = useCallback((signatureDataUrl) => {\n    const canvas = canvasRef.current;\n    if (!canvas || !signatureDataUrl) return;\n\n    const ctx = canvas.getContext('2d');\n    \n    // 1. Bersihkan canvas\n    clearCanvas(ctx, canvas);\n\n    // 2. Gambar ulang tanda tangan\n    const img = new Image();\n    img.onload = () => {\n      // Pastikan gambar digambar pada ukuran canvas saat ini\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n    };\n    img.src = signatureDataUrl;\n    \n    setHasDrawn(true);\n\n  }, []);\n  \n  // Efek untuk Inisialisasi Canvas dan Redraw\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    // Set canvas resolution based on display size for clear rendering\n    const rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width;\n    canvas.height = rect.height;\n    \n    const ctx = canvas.getContext('2d');\n    \n    // Inisialisasi dengan latar belakang putih\n    clearCanvas(ctx, canvas); \n    \n    // Redraw tanda tangan dari state jika ada\n    if (formData.signature && !isDrawing) {\n        redrawSignatureFromState(formData.signature);\n    }\n  }, [formData.signature, redrawSignatureFromState, isDrawing]);\n  \n  // Menggambar saat mouse/sentuhan bergerak\n  const drawSignature = useCallback((e, isTouch = false) => {\n    if (!isDrawing) return; \n    \n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    \n    const rect = canvas.getBoundingClientRect();\n    const x = isTouch ? e.touches[0].clientX - rect.left : e.clientX - rect.left;\n    const y = isTouch ? e.touches[0].clientY - rect.top : e.clientY - rect.top;\n\n    ctx.lineWidth = 2;\n    ctx.lineCap = 'round';\n    ctx.strokeStyle = '#000000';\n    ctx.lineTo(x, y);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    \n    // Perbarui hasDrawn setelah menggambar\n    setHasDrawn(true);\n    \n  }, [isDrawing]); \n\n  // Memulai menggambar\n  const handleStart = useCallback((e, isTouch) => {\n    if (isTouch) e.preventDefault(); \n\n    setIsDrawing(true);\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n    \n    const rect = canvas.getBoundingClientRect();\n    const x = isTouch ? e.touches[0].clientX - rect.left : e.clientX - rect.left;\n    const y = isTouch ? e.touches[0].clientY - rect.top : e.clientY - rect.top;\n    \n    // Mulai path baru\n    ctx.beginPath();\n    ctx.moveTo(x, y);\n    \n  }, []);\n\n  // Mengakhiri menggambar dan menyimpan ke state\n  const handleEnd = useCallback(() => {\n    if (isDrawing) { \n      setIsDrawing(false);\n      const canvas = canvasRef.current;\n      if (canvas) {\n        // Simpan tanda tangan yang baru digambar sebagai Data URL\n        const dataUrl = canvas.toDataURL('image/png');\n        handleFormChange('root', 'signature', dataUrl);\n      }\n    }\n  }, [isDrawing, handleFormChange]); \n\n  const clearSignature = () => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      const ctx = canvas.getContext('2d');\n      clearCanvas(ctx, canvas); // Bersihkan tampilan canvas\n      handleFormChange('root', 'signature', ''); // Kosongkan state\n      setHasDrawn(false);\n    }\n  };\n\n  // Efek untuk mengatur Event Listeners (hanya sekali saat mount)\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const mouseMoveHandler = (e) => drawSignature(e, false);\n    const touchMoveHandler = (e) => drawSignature(e, true);\n    const mouseDownHandler = (e) => handleStart(e, false);\n    const touchStartHandler = (e) => handleStart(e, true);\n    \n    const mouseUpHandler = () => handleEnd();\n    const touchEndHandler = () => handleEnd();\n\n\n    // Pasang Event Listeners\n    canvas.addEventListener('mousedown', mouseDownHandler);\n    canvas.addEventListener('mousemove', mouseMoveHandler);\n    // document untuk menangkap mouseup di luar canvas\n    document.addEventListener('mouseup', mouseUpHandler); \n    \n    canvas.addEventListener('touchstart', touchStartHandler);\n    canvas.addEventListener('touchmove', touchMoveHandler);\n    // document untuk menangkap touchend di luar canvas\n    document.addEventListener('touchend', touchEndHandler); \n\n    // Cleanup event listeners\n    return () => {\n      canvas.removeEventListener('mousedown', mouseDownHandler);\n      canvas.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler); \n      \n      canvas.removeEventListener('touchstart', touchStartHandler);\n      canvas.removeEventListener('touchmove', touchMoveHandler);\n      document.removeEventListener('touchend', touchEndHandler); \n    };\n  }, [drawSignature, handleStart, handleEnd]); // dependencies ini harus tetap ada\n  \n  return (\n    <div className=\"p-6 bg-white rounded-xl shadow-lg mt-6\">\n      <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Tanda Tangan Pelanggan</h3>\n      <div className=\"relative border border-gray-300 rounded-lg overflow-hidden\">\n        <canvas\n          ref={canvasRef}\n          className=\"w-full h-48 bg-white cursor-crosshair\"\n          style={{ touchAction: 'none' }} // Mencegah scrolling browser saat menggambar\n        ></canvas>\n        <button \n          type=\"button\"\n          onClick={clearSignature}\n          // Tampilkan tombol Clear hanya jika sudah ada tanda tangan (berdasarkan state)\n          className={`absolute top-2 right-2 p-2 rounded-full transition duration-150 ${\n             formData.signature || hasDrawn ? 'bg-red-100 text-red-600 hover:bg-red-200 opacity-100' : 'opacity-0 pointer-events-none'\n          }`}\n          title=\"Hapus Tanda Tangan\"\n        >\n          <X size={20} />\n        </button>\n      </div>\n\n      <div className=\"mt-4 flex items-center\">\n        <input \n          type=\"checkbox\" \n          id=\"agreeTerms\" \n          checked={formData.agreed} \n          onChange={(e) => handleFormChange('root', 'agreed', e.target.checked)}\n          className=\"h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500\"\n        />\n        <label htmlFor=\"agreeTerms\" className=\"ml-3 text-base text-gray-700 font-medium\">\n          Saya telah membaca dan menyetujui Syarat & Ketentuan.\n        </label>\n      </div>\n    </div>\n  );\n};\n\n\n// Komponen Utama: Form Inspeksi\nconst InspectionForm = ({ formData, handleFormChange, goToNext, goToPrev }) => {\n  // Hanya mendefinisikan item-item inspeksi\n  const inspectionItems = [\n    'Cat Mobil',\n    'Panel Bodi',\n    'Kaca',\n    'Ban',\n    'Pelek',\n  ];\n\n  return (\n    <div className=\"p-6 bg-gray-50 rounded-xl shadow-inner min-h-[60vh]\">\n      <h2 className=\"text-2xl font-extrabold text-indigo-700 mb-6 flex items-center\">\n        <ListChecks size={24} className=\"mr-3\"/> 2. Inspeksi Kendaraan\n      </h2>\n      \n      <div className=\"mb-6 p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-lg\">\n        <p className=\"font-semibold text-indigo-800\">Keterangan Status:</p>\n        <ul className=\"list-disc list-inside ml-4 text-sm text-indigo-700\">\n          <li>G = Good (Baik)</li>\n          <li>F = Fair (Cukup)</li>\n          <li>P = Poor (Buruk)</li>\n        </ul>\n      </div>\n\n      <div className=\"space-y-4\">\n        {inspectionItems.map((item) => (\n          <RatingInput\n            key={item}\n            inspectionId={item} // Menggunakan inspectionId di sini\n            details={formData.inspection[item] || { status: 'G', notes: '', file: null }}\n            handleFormChange={handleFormChange}\n          />\n        ))}\n      </div>\n\n      <div className=\"flex justify-between mt-8\">\n        <button\n          onClick={goToPrev}\n          type=\"button\"\n          className=\"px-6 py-3 bg-gray-300 text-gray-800 font-bold rounded-xl shadow-md hover:bg-gray-400 transition duration-150\"\n        >\n          &larr; Sebelumnya\n        </button>\n        <button\n          onClick={goToNext}\n          type=\"button\"\n          className=\"px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-lg hover:bg-indigo-700 transition duration-150\"\n        >\n          Lanjut ke Syarat & Tanda Tangan &rarr;\n        </button>\n      </div>\n    </div>\n  );\n};\n\n\n// Komponen Utama: Customer dan Vehicle Form\nconst CustomerForm = ({ formData, handleFormChange, goToNext }) => {\n  const handleChange = (e) => {\n    handleFormChange('customer', e.target.name, e.target.value);\n  };\n\n  return (\n    <div className=\"p-6 bg-white rounded-xl shadow-lg\">\n      <h2 className=\"text-2xl font-extrabold text-indigo-700 mb-6 flex items-center\">\n        <User size={24} className=\"mr-3\"/> 1. Detail Pelanggan & Kendaraan\n      </h2>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Customer Details */}\n        <div className=\"space-y-4 border-r pr-6\">\n          <h3 className=\"text-xl font-semibold text-gray-800 border-b pb-2\">Detail Pelanggan</h3>\n          <input\n            name=\"firstName\"\n            placeholder=\"Nama Depan Pelanggan\"\n            value={formData.customer.firstName}\n            onChange={handleChange}\n            required\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n          <input\n            name=\"lastName\"\n            placeholder=\"Nama Belakang Pelanggan\"\n            value={formData.customer.lastName}\n            onChange={handleChange}\n            required\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n          <input\n            name=\"phone\"\n            type=\"tel\"\n            placeholder=\"Nomor Telepon\"\n            value={formData.customer.phone}\n            onChange={handleChange}\n            required\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n        </div>\n\n        {/* Vehicle Details */}\n        <div className=\"space-y-4\">\n          <h3 className=\"text-xl font-semibold text-gray-800 border-b pb-2\">Detail Kendaraan</h3>\n          <input\n            name=\"carBrand\"\n            placeholder=\"Merek Mobil (e.g., Toyota)\"\n            value={formData.customer.carBrand}\n            onChange={handleChange}\n            required\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n          <input\n            name=\"carModel\"\n            placeholder=\"Model Mobil (e.g., Camry)\"\n            value={formData.customer.carModel}\n            onChange={handleChange}\n            required\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n          <input\n            name=\"color\"\n            placeholder=\"Warna Kendaraan\"\n            value={formData.customer.color}\n            onChange={handleChange}\n            required\n            className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500\"\n          />\n        </div>\n      </div>\n\n      <div className=\"flex justify-end mt-8\">\n        <button\n          onClick={goToNext}\n          type=\"button\"\n          className=\"px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl shadow-lg hover:bg-indigo-700 transition duration-150\"\n        >\n          Lanjut ke Inspeksi &rarr;\n        </button>\n      </div>\n    </div>\n  );\n};\n\n\n// Komponen Modal (Popup)\nconst Modal = ({ title, message, onClose, isSuccess }) => (\n  <div className=\"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4\">\n    <div className=\"bg-white rounded-xl shadow-2xl p-8 max-w-sm w-full text-center transform transition-all duration-300 scale-100\">\n      <div className={`mx-auto mb-4 ${isSuccess ? 'text-green-500' : 'text-red-500'}`}>\n        {isSuccess ? <CheckCircle size={48} className=\"mx-auto\"/> : <X size={48} className=\"mx-auto\"/>}\n      </div>\n      <h3 className=\"text-2xl font-bold mb-3 text-gray-900\">{title}</h3>\n      <p className=\"text-gray-600 mb-6\">{message}</p>\n      <button\n        onClick={onClose}\n        className=\"w-full py-3 px-4 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition duration-150 shadow-md\"\n      >\n        OK\n      </button>\n    </div>\n  </div>\n);\n\n// --- Komponen Utama Aplikasi ---\nconst App = () => {\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  const [modal, setModal] = useState({ show: false, title: '', message: '', isSuccess: false });\n  const [dbInstance, setDbInstance] = useState(null);\n  const [userId, setUserId] = useState(null);\n  \n  // State data form utama\n  const [formData, setFormData] = useState({\n    customer: { firstName: '', lastName: '', phone: '', carBrand: '', carModel: '', color: '' },\n    inspection: { \n      'Cat Mobil': { status: 'G', notes: '', file: null },\n      'Panel Bodi': { status: 'G', notes: '', file: null },\n      'Kaca': { status: 'G', notes: '', file: null },\n      'Ban': { status: 'G', notes: '', file: null },\n      'Pelek': { status: 'G', notes: '', file: null },\n    },\n    signature: '',\n    agreed: false,\n    date: new Date().toISOString(),\n  });\n\n  // --- FIREBASE INIT & AUTH ---\n  useEffect(() => {\n    if (auth && db) {\n      const initializeAuth = async () => {\n        try {\n          if (initialAuthToken) {\n            await signInWithCustomToken(auth, initialAuthToken);\n          } else {\n            await signInAnonymously(auth);\n          }\n        } catch (error) {\n          console.error(\"Firebase auth failed:\", error);\n          // Fallback to anonymous sign-in if custom token fails\n          try {\n             await signInAnonymously(auth);\n          } catch(anonError) {\n             console.error(\"Anonymous sign-in failed:\", anonError);\n          }\n        }\n      };\n\n      initializeAuth();\n\n      // Listener untuk mendapatkan ID pengguna setelah autentikasi\n      const unsubscribe = auth.onAuthStateChanged((user) => {\n        if (user) {\n          setUserId(user.uid);\n          setDbInstance(db);\n          console.log(\"Authenticated with UID:\", user.uid);\n        } else {\n          // Hanya set userId jika auth sudah ready dan tidak ada user (anon)\n          setUserId(crypto.randomUUID()); \n          setDbInstance(db);\n        }\n      });\n      return () => unsubscribe();\n    }\n  }, []);\n\n  // Handler perubahan form generik\n  const handleFormChange = (section, key, value) => {\n    if (section === 'root') {\n      setFormData(prev => ({\n        ...prev,\n        [key]: value\n      }));\n    } else {\n      // Untuk customer atau inspection\n      setFormData(prev => ({\n        ...prev,\n        [section]: {\n          ...prev[section],\n          [key]: value\n        }\n      }));\n    }\n  };\n\n  const goToNextPage = () => setCurrentPage(prev => prev + 1);\n  const goToPrevPage = () => setCurrentPage(prev => prev - 1);\n  const closeModal = () => setModal({ show: false, title: '', message: '', isSuccess: false });\n\n  // Handler Submit\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (!formData.agreed) {\n      setModal({ show: true, title: 'Error', message: 'Anda harus menyetujui Syarat & Ketentuan.', isSuccess: false });\n      return;\n    }\n\n    if (!formData.signature) {\n      setModal({ show: true, title: 'Error', message: 'Tanda tangan pelanggan tidak boleh kosong.', isSuccess: false });\n      return;\n    }\n\n    if (isLoading || !dbInstance || !userId) return;\n\n    setIsLoading(true);\n\n    try {\n      // 1. Filter Data URL Gambar yang valid dan hapus input file mentah\n      const dataToSend = JSON.parse(JSON.stringify(formData));\n      \n      // Hapus Data URL yang besar jika tidak ada, atau saring hanya yang dibutuhkan\n      Object.keys(dataToSend.inspection).forEach(item => {\n        if (dataToSend.inspection[item].file) {\n          // Pastikan hanya mengirim name dan dataUrl\n          dataToSend.inspection[item].file = {\n            name: dataToSend.inspection[item].file.name,\n            dataUrl: dataToSend.inspection[item].file.dataUrl\n          };\n        }\n      });\n\n      // 2. Simpan ke Firestore\n      const inspectionCollectionRef = collection(dbInstance, getCollectionPath(userId, 'inspections'));\n      await addDoc(inspectionCollectionRef, dataToSend);\n\n      // 3. Panggil backend untuk membuat dan mengunduh PDF\n      // Mengubah fetchPdf agar menggunakan jalur relatif '/api/generate-pdf' \n      // untuk memanfaatkan proxy yang dikonfigurasi di package.json.\n      await fetchPdf(dataToSend);\n      \n      setModal({ show: true, title: 'Success', message: 'Inspeksi berhasil ditambahkan dan PDF akan diunduh.', isSuccess: true });\n      // Reset form setelah berhasil\n      setFormData({\n        customer: { firstName: '', lastName: '', phone: '', carBrand: '', carModel: '', color: '' },\n        inspection: { \n          'Cat Mobil': { status: 'G', notes: '', file: null },\n          'Panel Bodi': { status: 'G', notes: '', file: null },\n          'Kaca': { status: 'G', notes: '', file: null },\n          'Ban': { status: 'G', notes: '', file: null },\n          'Pelek': { status: 'G', notes: '', file: null },\n        },\n        signature: '',\n        agreed: false,\n        date: new Date().toISOString(),\n      });\n      setCurrentPage(1);\n\n    } catch (error) {\n      console.error(\"Submission failed:\", error);\n      setModal({ show: true, title: 'Error', message: 'Gagal memproses inspeksi. Silakan coba lagi.', isSuccess: false });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const fetchPdf = async (data) => {\n    // Implementasi logic unduh PDF dari backend\n    console.log(\"Mencoba fetch PDF dari backend...\");\n\n    // PERBAIKAN: Menggunakan path relatif agar proxy di package.json bekerja.\n    const apiUrl = `/api/generate-pdf`; \n\n    let attempt = 0;\n    const maxRetries = 3;\n    const baseDelay = 1000;\n\n    while (attempt < maxRetries) {\n      try {\n        const response = await fetch(apiUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(data),\n        });\n\n        if (!response.ok) {\n          // Tambahkan logging lebih detail jika server merespons tapi dengan status error\n          const errorText = await response.text();\n          throw new Error(`HTTP error! status: ${response.status}. Details: ${errorText}`);\n        }\n\n        // Ambil nama file dari header Content-Disposition (jika ada)\n        const contentDisposition = response.headers.get('Content-Disposition');\n        let filename = 'inspection_report.pdf';\n        if (contentDisposition) {\n          const match = contentDisposition.match(/filename=\"(.+)\"/);\n          if (match && match[1]) {\n            filename = match[1];\n          }\n        }\n\n        const blob = await response.blob();\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n        a.click();\n        a.remove();\n        window.URL.revokeObjectURL(url);\n        \n        console.log(\"PDF berhasil diunduh.\");\n        return; // Keluar dari loop jika berhasil\n\n      } catch (error) {\n        console.error(`Attempt ${attempt + 1} failed:`, error);\n        attempt++;\n        if (attempt < maxRetries) {\n          const delay = baseDelay * Math.pow(2, attempt - 1); // Exponential backoff\n          await new Promise(res => setTimeout(res, delay));\n        } else {\n          // Tampilkan pesan error kepada pengguna jika semua retry gagal\n          setModal({ show: true, title: 'Error Unduhan', message: 'Gagal mengunduh PDF setelah beberapa kali percobaan. Pastikan server backend berjalan.', isSuccess: false });\n          console.error(\"Gagal mengunduh PDF setelah beberapa kali percobaan. Pastikan backend server Node.js berjalan di http://localhost:4000\");\n          throw new Error(\"PDF download failed after retries.\"); // Lempar error untuk mengakhiri proses\n        }\n      }\n    }\n  };\n\n\n  // --- Render Halaman ---\n  const renderPage = () => {\n    switch (currentPage) {\n      case 1:\n        return <CustomerForm formData={formData} handleFormChange={handleFormChange} goToNext={goToNextPage} />;\n      case 2:\n        return <InspectionForm formData={formData} handleFormChange={handleFormChange} goToNext={goToNextPage} goToPrev={goToPrevPage} />;\n      case 3:\n        return (\n          <form onSubmit={handleSubmit} className=\"p-6 bg-white rounded-xl shadow-lg\">\n            <h2 className=\"text-2xl font-extrabold text-indigo-700 mb-6 flex items-center\">\n              <FileText size={24} className=\"mr-3\"/> 3. Syarat & Ketentuan\n            </h2>\n\n            {/* Syarat & Ketentuan Placeholder */}\n            <div className=\"bg-gray-100 p-4 rounded-lg h-64 overflow-y-scroll border border-gray-200 text-sm text-gray-700 space-y-2 mb-6\">\n              <p className=\"font-bold text-center mb-3\">SYARAT DAN KETENTUAN - SERAH TERIMA KENDARAAN DI WRAP STATION</p>\n              <ol className=\"list-decimal list-inside space-y-1\">\n                <li>Kondisi kendaraan dapat berubah setelah pembersihan. Tim akan menginformasikan jika ada perubahan.</li>\n                <li>Status cat kendaraan (repaint/original) tidak dapat dipastikan, risiko ditanggung pemilik.</li>\n                <li>Penambahan jarak tempuh (mileage) bisa terjadi, dan bukan tanggung jawab Wrap Station.</li>\n                <li>Kerusakan/malfungsi mesin selama atau setelah pengerjaan bukan tanggung jawab Wrap Station.</li>\n                <li>Kerusakan akibat pembongkaran aksesori oleh pemilik selama atau setelah pengerjaan bukan tanggung jawab Wrap Station.</li>\n                <li>Kehilangan barang pribadi bukan tanggung jawab Wrap Station.</li>\n                <li>Wrap Station berhak melakukan tindakan teknis yang diperlukan tanpa persetujuan lebih lanjut.</li>\n                <li>Kondisi/modifikasi khusus yang tidak diinformasikan di awal dapat membatalkan garansi.</li>\n                <li>Penurunan baterai EV adalah kondisi alami, bukan tanggung jawab kami.</li>\n                <li>Estimasi pengerjaan dapat berubah karena faktor tak terduga.</li>\n              </ol>\n            </div>\n\n            <SignatureForm \n              formData={formData} \n              handleFormChange={handleFormChange} \n              onSubmit={handleSubmit} \n              isLoading={isLoading}\n            />\n\n            <div className=\"flex justify-between mt-8\">\n              <button\n                onClick={goToPrevPage}\n                type=\"button\"\n                className=\"px-6 py-3 bg-gray-300 text-gray-800 font-bold rounded-xl shadow-md hover:bg-gray-400 transition duration-150\"\n              >\n                &larr; Sebelumnya\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isLoading || !formData.agreed || !formData.signature}\n                className={`px-8 py-3 font-bold rounded-xl shadow-lg transition duration-150 flex items-center justify-center ${\n                  isLoading || !formData.agreed || !formData.signature\n                    ? 'bg-indigo-300 cursor-not-allowed'\n                    : 'bg-indigo-600 text-white hover:bg-indigo-700'\n                }`}\n              >\n                {isLoading ? (\n                  <>\n                    <Car size={20} className=\"animate-pulse mr-2\"/> Membuat PDF...\n                  </>\n                ) : (\n                  'Submit Inspection & Download PDF'\n                )}\n              </button>\n            </div>\n          </form>\n        );\n      default:\n        return <div>Halaman Tidak Ditemukan</div>;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-8 font-sans\">\n      <header className=\"mb-8 p-4 bg-white rounded-xl shadow-md\">\n        <h1 className=\"text-3xl font-extrabold text-indigo-800 flex items-center\">\n          <Car size={32} className=\"mr-3\"/> Wrap Station - Form Inspeksi Kendaraan\n        </h1>\n        <div className=\"mt-2 text-sm text-gray-500\">\n          User ID: {userId || 'Authenticating...'}\n        </div>\n      </header>\n      \n      <main className=\"max-w-4xl mx-auto\">\n        {renderPage()}\n      </main>\n\n      {modal.show && <Modal {...modal} onClose={closeModal} />}\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}